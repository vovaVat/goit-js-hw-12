{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst makeHTTPResponse = async (input, page) => {\n  const myApi = \"28678786-a2e7b218e16ae31de09ab66ee\";\n  const url = `https://pixabay.com/api/?key=${myApi}&q=${input}&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${page}`;\n\n  try {\n    const response = await axios.get(url);\n    return response.data;\n  } catch (error) {\n    console.error(\"Error fetching data:\", error);\n    throw error;\n  }\n}\nexport default makeHTTPResponse;","export function renderImages(images) {\n  return images.map(image => `\n      <a href=\"${image.largeImageURL}\" class=\"gallery-item\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"gallery-image\">\n          <div class=\"info\">\n              <p><b>Likes</b> <span>${image.likes}</span></p>\n              <p><b>Views</b> <span>${image.views}</span></p>\n              <p><b>Comments</b> <span>${image.comments}</span></p>\n              <p><b>Downloads</b> <span>${image.downloads}</span></p>\n          </div>\n      </a>\n  `).join('');\n}\n\nexport function clearGallery() {\n  document.querySelector('.gallery').innerHTML = '';\n}","import makeHTTPResponse from \"./js/pixabay-api\";\nimport { renderImages, clearGallery } from './js/render-functions';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst form = document.querySelector(\".search-form\");\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\"#loader\");\nconst lightbox = new SimpleLightbox('.gallery a');\nconst loaderMore = document.querySelector(\".loader-more\");\nconst loadButton = document.querySelector('.load-button');\n\nlet pageNum = 1;\nlet query = \"\";\nlet totalHits = 0;\nlet loadedHits = 0;\n\nloadButton.classList.add(\"hidden\");\nloaderMore.classList.add(\"hidden\");\n\nform.addEventListener(\"submit\", event => {\n  event.preventDefault();\n  query = document.querySelector('.input').value.trim();\n\n  if (!query) {\n    iziToast.warning({\n      message: 'Please enter a search term',\n      position: 'topRight',\n      backgroundColor: '#FF0000',\n      color: 'white',\n      timeout: 5000,\n    });\n    return;\n  }\n\n  clearGallery();\n  loadButton.classList.add(\"hidden\");\n  loader.classList.remove(\"hidden\");\n  pageNum = 1;\n  loadedHits = 0;\n\n  makeHTTPResponse(query, pageNum)\n    .then(data => {\n      totalHits = data.totalHits;\n      loadedHits = data.hits.length;\n\n\n      if (totalHits === 0) {\n        iziToast.info({\n          message: \"Sorry, there are no images matching your search query. Please try again!\",\n          position: 'topRight',\n          backgroundColor: '#EF4040',\n          color: 'white',\n          timeout: 5000,\n        });\n        loader.classList.add(\"hidden\");\n        return;\n      }\n\n      gallery.innerHTML = renderImages(data.hits);\n      pageNum++;\n      lightbox.refresh();\n\n      if (loadedHits < totalHits) {\n        loadButton.classList.remove(\"hidden\");\n      }\n    })\n    .catch(error => {\n      iziToast.error({\n        message: 'Error fetching images. Please try again later.',\n        position: 'topRight',\n        backgroundColor: '#FF0000',\n        color: 'white',\n        timeout: 5000,\n      });\n    })\n    .finally(() => {\n      loader.classList.add(\"hidden\");\n    });\n});\n\nloadButton.addEventListener(\"click\", () => {\n  loadButton.classList.add(\"hidden\");\n  loaderMore.classList.remove(\"hidden\");\n\n  makeHTTPResponse(query, pageNum)\n    .then(data => {\n      loadedHits += data.hits.length;\n\n      if (loadedHits >= totalHits) {\n        loadButton.classList.add(\"hidden\");\n        iziToast.info({\n          message: \"We're sorry, but you've reached the end of search results.\",\n          position: 'topRight',\n          color: 'white',\n          timeout: 5000,\n        });\n      }\n\n      gallery.insertAdjacentHTML('beforeend', renderImages(data.hits));\n      pageNum++;\n      lightbox.refresh();\n    })\n    .catch(error => {\n      iziToast.error({\n        message: 'Error loading more images. Please try again later.',\n        position: 'topRight',\n        backgroundColor: '#FF0000',\n        color: 'white',\n        timeout: 5000,\n      });\n    })\n    .finally(() => {\n      loaderMore.classList.add(\"hidden\");\n\n      if (loadedHits < totalHits) {\n        loadButton.classList.remove(\"hidden\");\n\n        const rect = document.querySelector(\".gallery-item\")?.getBoundingClientRect().height || 100;\n\n        window.scrollBy({\n          top: rect * 2,\n          left: 0,\n          behavior: \"smooth\",\n        });\n      }\n    });\n});\n"],"names":["makeHTTPResponse","input","page","url","axios","error","renderImages","images","image","clearGallery","form","gallery","loader","lightbox","SimpleLightbox","loaderMore","loadButton","pageNum","query","totalHits","loadedHits","event","iziToast","data","rect","_a"],"mappings":"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"}